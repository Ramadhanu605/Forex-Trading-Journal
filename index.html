<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Forex Pribadi</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family:'Segoe UI',sans-serif; background:#f4f6f8; margin:0; padding:0; }
header { background:#1f2937; color:#fff; text-align:center; padding:1rem; font-size:1.5rem; }
.dashboard { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1rem; padding:2rem; }
.card { background:#fff; border-radius:12px; padding:1rem; box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.card h3 { margin-top:0; margin-bottom:1rem; color:#111827; }
canvas { width:100% !important; height:250px !important; }
table { width:100%; border-collapse:collapse; }
th, td { padding:0.5rem; text-align:center; border-bottom:1px solid #e5e7eb;}
th { background-color:#f3f4f6; }
input, select { margin:0.2rem; padding:0.3rem; }
</style>
</head>
<body>

<header>Dashboard Forex Pribadi</header>

<div class="dashboard">

  <!-- Summary KPIs -->
  <div class="card" id="kpiCard">
    <h3>Summary KPIs</h3>
    <p>Total Trades: <span id="totalTrades">0</span></p>
    <p>Winning Trades: <span id="winTrades">0</span></p>
    <p>Losing Trades: <span id="loseTrades">0</span></p>
    <p>Win Rate: <span id="winRate">0%</span></p>
    <p>Profit/Loss: $<span id="totalPL">0</span></p>
  </div>

  <!-- Equity Curve -->
  <div class="card">
    <h3>Equity Curve</h3>
    <canvas id="equityChart"></canvas>
  </div>

  <!-- Monthly Performance -->
  <div class="card">
    <h3>Monthly Performance</h3>
    <canvas id="monthlyChart"></canvas>
  </div>

  <!-- Trade Details Table -->
  <div class="card">
    <h3>Trade Details</h3>
    <label for="symbolFilter">Filter Symbol:</label>
    <select id="symbolFilter"><option value="All">All</option></select>
    <label for="typeFilter">Filter Type:</label>
    <select id="typeFilter">
      <option value="All">All</option>
      <option value="Buy">Buy</option>
      <option value="Sell">Sell</option>
    </select>
    <table>
      <thead>
        <tr><th>Date</th><th>Symbol</th><th>Type</th><th>Qty</th><th>Entry</th><th>Exit</th><th>P/L</th></tr>
      </thead>
      <tbody id="tradeTable"></tbody>
    </table>
  </div>

</div>

<script>
// Contoh data trade pribadi
const trades = [
  {date:'2026-02-01', symbol:'EURUSD', type:'Buy', qty:1, entry:1.08, exit:1.085, pl:50},
  {date:'2026-02-02', symbol:'GBPUSD', type:'Sell', qty:2, entry:1.25, exit:1.245, pl:100},
  {date:'2026-02-03', symbol:'USDJPY', type:'Buy', qty:1, entry:110, exit:111, pl:100},
  {date:'2026-02-05', symbol:'EURUSD', type:'Sell', qty:1, entry:1.09, exit:1.085, pl:50}
];

// Generate table dan filter options
const tradeTable = document.getElementById('tradeTable');
const symbolFilter = document.getElementById('symbolFilter');
const typeFilter = document.getElementById('typeFilter');

const symbols = [...new Set(trades.map(t=>t.symbol))];
symbols.forEach(sym => { 
  const opt = document.createElement('option'); 
  opt.value = sym; opt.text = sym; 
  symbolFilter.add(opt);
});

function updateTable() {
  const sym = symbolFilter.value;
  const type = typeFilter.value;
  tradeTable.innerHTML = '';
  let total=0, win=0, lose=0, pl=0;
  trades.forEach(t => {
    if((sym==='All'||t.symbol===sym)&&(type==='All'||t.type===type)) {
      const row = tradeTable.insertRow();
      row.insertCell().innerText = t.date;
      row.insertCell().innerText = t.symbol;
      row.insertCell().innerText = t.type;
      row.insertCell().innerText = t.qty;
      row.insertCell().innerText = t.entry;
      row.insertCell().innerText = t.exit;
      row.insertCell().innerText = t.pl;
      total++;
      pl += t.pl;
      if(t.pl>0) win++; else lose++;
    }
  });
  document.getElementById('totalTrades').innerText = total;
  document.getElementById('winTrades').innerText = win;
  document.getElementById('loseTrades').innerText = lose;
  document.getElementById('winRate').innerText = total? Math.round(win/total*100)+'%':'0%';
  document.getElementById('totalPL').innerText = pl;
  updateCharts();
}

symbolFilter.addEventListener('change', updateTable);
typeFilter.addEventListener('change', updateTable);

// Charts
let equityChart, monthlyChart;

function updateCharts() {
  const filtered = trades.filter(t => 
    (symbolFilter.value==='All'||t.symbol===symbolFilter.value) &&
    (typeFilter.value==='All'||t.type===typeFilter.value)
  );
  const equityData = filtered.map(t=>t.pl).reduce((a,b,i)=> a.concat((a[i-1]||0)+b), []);
  const labels = filtered.map(t=>t.date);
  
  if(equityChart) equityChart.destroy();
  equityChart = new Chart(document.getElementById('equityChart'), {
    type:'line',
    data: { labels, datasets:[{label:'Equity', data:equityData, borderColor:'#3b82f6', backgroundColor:'rgba(59,130,246,0.2)', tension:0.3}] }
  });

  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const monthlyPL = Array(12).fill(0);
  filtered.forEach(t => {
    const month = new Date(t.date).getMonth();
    monthlyPL[month] += t.pl;
  });
  if(monthlyChart) monthlyChart.destroy();
  monthlyChart = new Chart(document.getElementById('monthlyChart'), {
    type:'bar',
    data:{ labels:months, datasets:[{label:'Monthly P/L', data:monthlyPL, backgroundColor:'#10b981'}] }
  });
}

// Init
updateTable();
</script>

</body>
</html>
